# Overview

A simple command-line utility used to store key/value pairs on the Consul service. 

The ideal use case for this package is when you need to configure services with shared, dynamic variables (i.e. variables that are not available until runtime/deployment).

# Rules

- Keys must be prefixed by the name of your deployment and a forward slash, e.g:
  - `"ab-deployment/contract-address"` - valid
  - `"contract-address"` - invalid
- Valid operations are specified in the `validCommands` `const` inside consul.js
- Arg list follows the format: "\<operation\>", "\<key\>", "\<value\>"

# Commands

- *Setting a key/value pair:*
  ```sh
  node consul.js set-kv "ab-deployment/contract-address" "0x123..."
  ```

- *Retrieving a value:*
  ```sh
  node consul.js get-kv "ab-deployment/contract-address"
  ```

- *Checking if a key/value pair exists:*
  ```sh
  node consul.js check-key-exists "ab-deployment/contract-address"
  ```

- *Deleting a key/value pair:*
  ```sh
  node consul.js del-kv "ab-deployment/contract-address"
  ```

# Usage

- *With default config:*
  ```js
  // consul.js
  require('@appliedblockchain/consul')()
  ```

  ```sh
  # consul.sh
    node consul.js set-kv "ab-deployment/contract-address" "0x123..."
  ```

- *With default config - direct from command line:*
  ```sh
  npx @appliedblockchain/consul set-kv "ab-deployment/contract-address" 
  ```

- *With custom config:*
  ```js
  // consul.js
  const { initConsul } = require('@appliedblockchain/consul/lib/ab-consul.js')
  const consul = initConsul({
    host: 'https://ab...'
  })
  require('@appliedblockchain/consul')(consul)
  ```

  ```sh
  # consul.sh
    node consul.js set-kv "ab-deployment/contract-address" "0x123..."
  ```